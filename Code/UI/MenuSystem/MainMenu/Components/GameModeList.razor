@namespace Facepunch.UI

@if ( GameModes is null ) return;

<root class="layout with-gap">
    @foreach ( var gameMode in GameModes )
    {
        <GameModeCard GameMode=@gameMode Selected=@( SelectedGameMode == gameMode ) OnSelected=@DoSelect />
    }
</root>

@code
{
    public IReadOnlyList<GameModeInfo> GameModes { get; set; }
    public Action<GameModeInfo> OnSelected { get; set; }
    public GameModeInfo SelectedGameMode { get; set; }

    // Filter with this map in mind.
    public void Filter( MapDefinition map )
    {
        GameModes = GameMode.GetAll( map.SceneFile );
        StateHasChanged();
    }

    public void DoSelect( GameModeInfo gm )
    {
        SelectedGameMode = gm;
        OnSelected?.Invoke( gm );
        StateHasChanged();
    }
}